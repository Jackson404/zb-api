{"remainingRequest":"C:\\Users\\lifei\\lifei\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\lifei\\lifei\\src\\components\\Login\\Login.vue?vue&type=style&index=0&id=71a3bedb&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\lifei\\lifei\\src\\components\\Login\\Login.vue","mtime":1566198971801},{"path":"C:\\Users\\lifei\\lifei\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\lifei\\lifei\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\lifei\\lifei\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\lifei\\lifei\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\lifei\\lifei\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.hello {\r\n\tdisplay: none;\r\n}\r\n.cc {\r\n\tmargin-top: 0 !important;\r\n}\r\n.el-button {\r\n\tpadding: 10px 45px;\r\n}\r\n.demonstration {\r\n\tdisplay: block;\r\n\tmargin: 0 auto;\r\n\tcursor: pointer;\r\n\tcolor: #8492a6;\r\n\tfont-size: 14px;\r\n}\r\n",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components/Login","sourcesContent":["<template>\r\n\t<div style=\"width: 100%;height: 100vh;background: #fff;\">\r\n\t\t<div style=\"width: 100%;height: 300px;line-height: 300px;font-size: 40px;color: #666;text-align: center;letter-spacing: 4px;\">企业登录</div>\r\n\r\n\t\t<div style=\"width: 500px;margin:0 auto;\">\r\n\t\t\t<el-form\r\n\t\t\t\t:model=\"ruleForm\"\r\n\t\t\t\tstatus-icon\r\n\t\t\t\t:rules=\"rules\"\r\n\t\t\t\tref=\"ruleForm\"\r\n\t\t\t\tlabel-width=\"100px\"\r\n\t\t\t\tclass=\"demo-ruleForm\"\r\n\t\t\t\tstyle=\"border: 1px solid #ebebeb;box-sizing: border-box;padding: 80px 70px 50px 30px;\"\r\n\t\t\t>\r\n\t\t\t\t<el-form-item label=\"账号\" prop=\"pass\" style=\"text-align: center;\">\r\n\t\t\t\t\t<el-input type=\"text\" v-model=\"ruleForm.pass\" autocomplete=\"off\" placeholder=\"请输入账号\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"验证码\" prop=\"checkPass\" style=\"text-align: center;position: relative;\">\r\n\t\t\t\t\t<el-input type=\"password\" v-model=\"ruleForm.checkPass\" autocomplete=\"off\" placeholder=\"请输入验证码\"></el-input>\r\n\t\t\t\t\t<el-button @click=\"sendCode\" v-if=\"send\" type=\"primary\" style=\"position: absolute;right: 0;top: 0;padding: 12px 30px;\">获取验证码</el-button>\r\n\t\t\t\t\t<el-button v-else type=\"primary\" style=\"position: absolute;right: 0;top: 0;padding: 12px 30px;\">{{ num }} s</el-button>\r\n\t\t\t\t</el-form-item>\r\n\r\n\t\t\t\t<el-form-item>\r\n\t\t\t\t\t<el-button type=\"primary\" @click=\"submitForm('ruleForm')\">登录</el-button>\r\n\t\t\t\t\t<el-button @click=\"resetForm('ruleForm')\">重置</el-button>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tname: 'Staff',\r\n\r\n\tdata() {\r\n\t\tvar validatePass = (rule, value, callback) => {\r\n\t\t\tif (value === '') {\r\n\t\t\t\tcallback(new Error('请输入账号'));\r\n\t\t\t} else {\r\n\t\t\t\tif (this.ruleForm.checkPass !== '') {\r\n\t\t\t\t\tthis.$refs.ruleForm.validateField('checkPass');\r\n\t\t\t\t}\r\n\t\t\t\tcallback();\r\n\t\t\t}\r\n\t\t};\r\n\t\tvar validatePass2 = (rule, value, callback) => {\r\n\t\t\tif (value === '') {\r\n\t\t\t\tcallback(new Error('请输入验证码'));\r\n\t\t\t} else {\r\n\t\t\t\tcallback();\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn {\r\n\t\t\truleForm: {\r\n\t\t\t\tpass: '',\r\n\t\t\t\tcheckPass: '',\r\n\t\t\t\tage: ''\r\n\t\t\t},\r\n\t\t\trules: {\r\n\t\t\t\tpass: [{ validator: validatePass, trigger: 'blur' }],\r\n\t\t\t\tcheckPass: [{ validator: validatePass2, trigger: 'blur' }]\r\n\t\t\t},\r\n\t\t\tsend: true,\r\n\t\t\tnum: 60\r\n\t\t};\r\n\t},\r\n\tcreated() {},\r\n\tmethods: {\r\n\t\tsubmitForm(formName) {\r\n\t\t\tthis.$refs[formName].validate(valid => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tconsole.log(valid);\r\n\t\t\t\t\tconsole.log(this);\r\n\r\n\t\t\t\t\tthis.$_loading = this.$loading({\r\n\t\t\t\t\t\tlock: true,\r\n\t\t\t\t\t\ttext: 'Loading',\r\n\t\t\t\t\t\tspinner: 'el-icon-loading',\r\n\t\t\t\t\t\tbackground: 'rgba(0, 0, 0, 0.7)'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvar data = {\r\n\t\t\t\t\t\taccessToken: '1565742674|145B1691263AEC04CC1722BA2EF68A86',\r\n\t\t\t\t\t\tphone: this.ruleForm.pass,\r\n\t\t\t\t\t\tvCode: this.ruleForm.checkPass\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tvar _this = this;\r\n\t\t\t\t\tthis.$http\r\n\t\t\t\t\t\t.login(data)\r\n\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t_this.$_loading.close();\r\n\t\t\t\t\t\t\t//切换发送显示\r\n\t\t\t\t\t\t\t_this.send = false;\r\n\t\t\t\t\t\t\tif (res.errorCode == 0) {\r\n\t\t\t\t\t\t\t\t//存到cookies\r\n\t\t\t\t\t\t\t\tthis.$cookies.set('access_token', res.data.id_token);\r\n\r\n\t\t\t\t\t\t\t\tvar data = {\r\n\t\t\t\t\t\t\t\t\taccess_token: res.data.id_token\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t//分发actions 中声明的方法\r\n\t\t\t\t\t\t\t\tthis.$store.dispatch('getUser', data);\r\n\r\n\t\t\t\t\t\t\t\tif (res.data.isReview == 2) {\r\n\t\t\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\t\t\tmessage: '登录成功',\r\n\t\t\t\t\t\t\t\t\t\ttype: 'success'\r\n\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t\t//回到前面的数据\r\n\t\t\t\t\t\t\t\t\tthis.$router.go(-1);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t//第一次登录 去审核\r\n\t\t\t\t\t\t\t\tif (res.data.isReview == 0) {\r\n\t\t\t\t\t\t\t\t\t//跳转认证\r\n\t\t\t\t\t\t\t\t\tthis.$router.push({ name: 'Attestation', params: { access_token: res.data.id_token } });\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t//第一次登录 去审核\r\n\t\t\t\t\t\t\t\tif (res.data.isReview == 1) {\r\n\t\t\t\t\t\t\t\t\t//跳转认证\r\n\t\t\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\t\t\tshowClose: true,\r\n\t\t\t\t\t\t\t\t\t\tmessage: '您的账户审核中，稍后再试',\r\n\t\t\t\t\t\t\t\t\t\ttype: 'error'\r\n\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log('error submit!!');\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tresetForm(formName) {\r\n\t\t\tthis.$refs[formName].resetFields();\r\n\t\t},\r\n\t\tsendCode() {\r\n\t\t\tif (this.ruleForm.pass.length == 0) {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: '请输入手机号哦',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar data = {\r\n\t\t\t\taccessToken: '1565742674|145B1691263AEC04CC1722BA2EF68A86',\r\n\t\t\t\tphone: this.ruleForm.pass\r\n\t\t\t};\r\n\t\t\t// this.$http.sendSmss(data)\r\n\t\t\t//发送验证码\r\n\t\t\tvar _this = this;\r\n\t\t\tthis.$http\r\n\t\t\t\t.sendSmss(data)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t//切换发送显示\r\n\t\t\t\t\t_this.send = false;\r\n\t\t\t\t\tif (res.errorCode == 0) {\r\n\t\t\t\t\t\t_this.$message({\r\n\t\t\t\t\t\t\tmessage: '验证码发送成功',\r\n\t\t\t\t\t\t\ttype: 'success'\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t//倒计时\r\n\t\t\t\t\t\t_this.countdown();\r\n\t\t\t\t\t} else if (res.errorCode == -20000013) {\r\n\t\t\t\t\t\t_this.$message({\r\n\t\t\t\t\t\t\tmessage: '请输入正确手机号',\r\n\t\t\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t_this.$message({\r\n\t\t\t\t\t\t\tmessage: res.msg,\r\n\t\t\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tcountdown() {\r\n\t\t\tvar num = 59;\r\n\t\t\tvar _this = this;\r\n\t\t\tvar timer = setInterval(function() {\r\n\t\t\t\tif (num == 0) {\r\n\t\t\t\t\t_this.send = true;\r\n\t\t\t\t\t_this.num = 60;\r\n\t\t\t\t\tclearInterval(timer);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_this.num = num--;\r\n\t\t\t\t}\r\n\t\t\t}, 1000);\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.hello {\r\n\tdisplay: none;\r\n}\r\n.cc {\r\n\tmargin-top: 0 !important;\r\n}\r\n.el-button {\r\n\tpadding: 10px 45px;\r\n}\r\n.demonstration {\r\n\tdisplay: block;\r\n\tmargin: 0 auto;\r\n\tcursor: pointer;\r\n\tcolor: #8492a6;\r\n\tfont-size: 14px;\r\n}\r\n</style>\n"]}]}